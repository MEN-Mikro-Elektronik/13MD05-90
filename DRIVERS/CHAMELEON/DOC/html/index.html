<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - Chameleon System Unit Driver - Linux native driver for MEN Chameleon FPGA driver/device registration.</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">Chameleon System Unit Driver &nbsp; </h1>
	<h3>Linux native driver for MEN Chameleon FPGA driver/device registration.</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindexHL" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>Linux native driver for MEN Chameleon FPGA driver/device registration. </h1>
<p>
The men_lx_chameleon Linux kernel module serves as an universal interface for any functional unit inside the FPGA. It is needed by all Linux native drivers dealing with these FPGA units e.g. the 13z025-90 UART driver. <br>
<p>
<br>
 <h2><a name="installation"></a>
Driver Build and Installation</h2>
There are several ways to build the men_lx_chameleon driver.<h3><a name="installation_native"></a>
Build pure native</h3>
As a pure native driver, the driver can be built by itself. Therefore edit the $(MEN_LIN_DIR)/DRIVERS/CHAMELEON/Makefile to adapt the defines MEN_LIN_DIR, KERNELDIR, DRV_SRC to match your environment and needs. Since the driver is intenden to be run together with the other MDIS for Linux Modules, there are several other files necessary to be included if the driver is intended to be built in the kernel.<p>
<ul>
<li>Copy the directory of the driver $(MEN_LIN_DIR)/LINUX/DRIVERS/CHAMELEON. <br>
 to the linux kernel directory $(LINUX_DIR)/linux/drivers/men_chameleon/ <br>
</li></ul>
<p>
<ul>
<li>To make the kernel build process aware of the new driver directory, add the following line to $(LINUX_DIR)/linux/drivers/Makefile: <br>
 Linux Kernel 2.4.x: <br>
 <div class="fragment"><pre>
          subdir-m += men_chameleon
</pre></div>Linux Kernel 2.6.x: <br>
 <div class="fragment"><pre>
          obj-m += men_chameleon\
</pre></div></li></ul>
<p>
<ul>
<li>build your system, the driver is built as men_lx_chameleon module</li></ul>
<h3><a name="installation_mdis"></a>
Build using MEN MDIS framework</h3>
When using the ElinOS and MEN MDIS environments, the driver can be built and installed just by adding the MDIS makefile <br>
<p>
$(MEN_LIN_DIR)/DRIVERS/CHAMELEON/driver.mak <br>
<p>
to the $(ELINOS_PROJECT)/src/mdis/Makefile under the ALL_NATIVE_DRIVERS entry. The drivers object file is installed properly into the ElinOS environment (path: $(ELINOS_PROJECT)/kernel.rootfs/lib/modules/$(LINUX_VERSION)/misc). <br>
<p>
If you are using the MEN MDIS Configuration Wizard (MDISWIZ) the driver is automatically built if a device is configured which needs it.<p>
<br>
 <h2><a name="parameter"></a>
Parameter</h2>
The driver's single parameter usePciIrq tells the it to use the interrupt number from the PCI config table instead of taking it from the FPGA's built-in table. It is set in most cases. <br>
<p>
Example: modprobe men_lx_chameleon usePciIrq=1 
	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for Chameleon System Unit Driver using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2010 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

