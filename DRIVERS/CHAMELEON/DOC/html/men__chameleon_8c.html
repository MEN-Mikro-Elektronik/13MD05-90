<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - Chameleon System Unit Driver - men_chameleon.c File Reference</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">Chameleon System Unit Driver &nbsp; </h1>
	<h3>men_chameleon.c File Reference</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>men_chameleon.c File Reference</h1>MEN Chameleon FPGA driver/device registration.  
<a href="#_details">More...</a>
<p>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structCAMELEON__API__VERSION.html">CAMELEON_API_VERSION</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">data structure to handle version differences between driver and FPGA </em> <a href="structCAMELEON__API__VERSION.html#_details">More...</a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structCHAMELEON__EARLY__T.html">CHAMELEON_EARLY_T</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">data structure for early access to core FPGAs </em> <a href="structCHAMELEON__EARLY__T.html#_details">More...</a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structCHAMELEON__HANDLE__T.html">CHAMELEON_HANDLE_T</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">data structure that handles one instance of a chameleon FPGA </em> <a href="structCHAMELEON__HANDLE__T.html#_details">More...</a><em><br><br></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a name="a9" doxytag="men_chameleon.c::LIST_HEAD"></a>
&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a9">LIST_HEAD</a> (G_chamLst)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">list of chameleon FPGAs <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a name="a10" doxytag="men_chameleon.c::LIST_HEAD"></a>
&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a10">LIST_HEAD</a> (G_drvLst)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">list of registered drivers <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a name="a11" doxytag="men_chameleon.c::LIST_HEAD"></a>
&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a11">LIST_HEAD</a> (G_drvV2Lst)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">list of registered V2 drivers <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a15">chameleon_announce</a> (<a class="el" href="structCHAMELEON__UNIT__T.html">CHAMELEON_UNIT_T</a> *unit, <a class="el" href="structCHAMELEON__DRIVER__T.html">CHAMELEON_DRIVER_T</a> *drv)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Probes driver if it can handle the new unit. </em> <a href="#a15"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a16">chameleonV2_announce</a> (<a class="el" href="structCHAMELEONV2__UNIT__T.html">CHAMELEONV2_UNIT_T</a> *unit, <a class="el" href="structCHAMELEONV2__DRIVER__T.html">CHAMELEONV2_DRIVER_T</a> *drv)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Probes driver if it can handle the new unit. </em> <a href="#a16"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a name="a17" doxytag="men_chameleon.c::chameleon_announce_fpga"></a>
void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a17">chameleon_announce_fpga</a> (<a class="el" href="structCHAMELEON__HANDLE__T.html">CHAMELEON_HANDLE_T</a> *h)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">probes all units of new FPGA against all registered drivers <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a18">men_chameleon_register_driver</a> (<a class="el" href="structCHAMELEON__DRIVER__T.html">CHAMELEON_DRIVER_T</a> *drv)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">register a new chameleon driver </em> <a href="#a18"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a19">men_chameleonV2_register_driver</a> (<a class="el" href="structCHAMELEONV2__DRIVER__T.html">CHAMELEONV2_DRIVER_T</a> *drv)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">register a new chameleon V2 driver </em> <a href="#a19"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a20">men_chameleon_unregister_driver</a> (<a class="el" href="structCHAMELEON__DRIVER__T.html">CHAMELEON_DRIVER_T</a> *drv)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">unregister a chameleon driver </em> <a href="#a20"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a21">men_chameleonV2_unregister_driver</a> (<a class="el" href="structCHAMELEONV2__DRIVER__T.html">CHAMELEONV2_DRIVER_T</a> *drv)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">unregister a chameleon V2 driver </em> <a href="#a21"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a22">men_chameleon_unit_find</a> (int modCode, int idx, <a class="el" href="structCHAMELEON__UNIT__T.html">CHAMELEON_UNIT_T</a> *unit)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the system wide nth occurrance of a chameleon module <em>modCode</em>. </em> <a href="#a22"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a23">men_chameleonV2_unit_find</a> (int devId, int idx, <a class="el" href="structCHAMELEONV2__UNIT__T.html">CHAMELEONV2_UNIT_T</a> *unit)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the system wide nth occurrance of a chameleon module <em>devId</em>. </em> <a href="#a23"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int __devinit&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a24">init_one</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Probe/initialize Chameleon FPGA. </em> <a href="#a24"></a><em><br><br></td></tr>
<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a name="a5" doxytag="men_chameleon.c::G_chamInit"></a>
int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a5">G_chamInit</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">men_chameleon_init was called <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a name="a6" doxytag="men_chameleon.c::G_chamFctTable"></a>
<a class="el" href="structCHAM__FUNCTBL.html">CHAM_FUNCTBL</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="men__chameleon_8c.html#a6">G_chamFctTable</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Chameleon function table. <br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
MEN Chameleon FPGA driver/device registration. 
<p>
<dl compact><dt><b>Author:</b></dt><dd>kp/ub/ts <dl compact><dt><b>Date</b></dt><dd>2011/04/14 17:36:26 </dd></dl>
<dl compact><dt><b>Revision</b></dt><dd>1.33 </dd></dl>
</dd></dl>
<p>
Derived from <a class="el" href="men__chameleon_8c.html">men_chameleon.c</a> contained in EM04A Linux BSP by Klaus Popp.<p>
Registers each chameleon FPGA found to the PCI subsystem. Provides a driver registration/probe interface similar to the PCI subsystem.<p>
Module parameters: usePciIrq : if 1, use the IRQ from the PCI config table for all devices in the FPGA - default if 0 use the IRQ from the Chameleon table. Can be different for every device. Currently makes sense with EM04/A only.<p>
Switches: MEN_CHAMV2_IRQ_OFFSET - needed for onboard chameleon FPGAs with IRQs connected to external CPU IRQs instead of PCI interrupt.<hr><h2>Function Documentation</h2>
<a name="a15" doxytag="men_chameleon.c::chameleon_announce"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int chameleon_announce </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structCHAMELEON__UNIT__T.html">CHAMELEON_UNIT_T</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>unit</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structCHAMELEON__DRIVER__T.html">CHAMELEON_DRIVER_T</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>drv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Probes driver if it can handle the new unit. 
<p>
<ul>
<li>does nothing if the unit has already a driver attached</li><li>checks if the unit's module code is to be handled by <em>drv</em> </li><li>if so, calls the driver's probe function</li><li>on success, assigns the driver to the unit</li></ul>
<p>
<dl compact><dt><b>Returns:</b></dt><dd>1 if <em>drv</em> assigned to unit, 0 if not </dd></dl>
    </td>
  </tr>
</table>
<a name="a16" doxytag="men_chameleon.c::chameleonV2_announce"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int chameleonV2_announce </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structCHAMELEONV2__UNIT__T.html">CHAMELEONV2_UNIT_T</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>unit</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structCHAMELEONV2__DRIVER__T.html">CHAMELEONV2_DRIVER_T</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>drv</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Probes driver if it can handle the new unit. 
<p>
<ul>
<li>does nothing if the unit has already a driver attached</li><li>checks if the unit's module code is to be handled by <em>drv</em> </li><li>if so, calls the driver's probe function</li><li>on success, assigns the driver to the unit</li></ul>
<p>
<dl compact><dt><b>Returns:</b></dt><dd>1 if <em>drv</em> assigned to unit, 0 if not </dd></dl>
    </td>
  </tr>
</table>
<a name="a24" doxytag="men_chameleon.c::init_one"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int __devinit init_one </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Probe/initialize Chameleon FPGA. 
<p>
Gets called (during execution of pci_register_driver for already existing devices or later if a new device gets inserted) for all PCI devices which match the ID table and are not handled by the other drivers yet. This function gets passed a pointer to the pci_dev structure representing the device and also which entry in the ID table did the device match. It returns zero when the driver has accepted the device or an error code (negative number) otherwise.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>pdev</em>&nbsp;</td><td>pci_dev structure representing the device </td></tr>
    <tr><td valign=top><em>ent</em>&nbsp;</td><td>entry in PCI table that matches</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 when the driver has accepted the device or an error code (negative number) otherwise. </dd></dl>
    </td>
  </tr>
</table>
<a name="a18" doxytag="men_chameleon.c::men_chameleon_register_driver"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int men_chameleon_register_driver </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structCHAMELEON__DRIVER__T.html">CHAMELEON_DRIVER_T</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>drv</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
register a new chameleon driver 
<p>
Adds the driver structure to the list of registered drivers. Immediately checks if any known FPGA unit can be handled by the new driver and calls it probe() function if so.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>drv</em>&nbsp;</td><td><b>IN</b> the driver structure to register. Must be kept intact by caller.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of chameleon units which were claimed by the driver during registration. The driver remains registered even if the return value is zero. </dd></dl>
    </td>
  </tr>
</table>
<a name="a22" doxytag="men_chameleon.c::men_chameleon_unit_find"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int men_chameleon_unit_find </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>modCode</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>idx</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structCHAMELEON__UNIT__T.html">CHAMELEON_UNIT_T</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>unit</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Find the system wide nth occurrance of a chameleon module <em>modCode</em>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>modCode</em>&nbsp;</td><td><b>IN</b> module code to search </td></tr>
    <tr><td valign=top><em>idx</em>&nbsp;</td><td><b>IN</b> nth occurance of module (system wide!) </td></tr>
    <tr><td valign=top><em>unit</em>&nbsp;</td><td><b>OUT</b> filled with unit information </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success or negative linux error number </dd></dl>
    </td>
  </tr>
</table>
<a name="a20" doxytag="men_chameleon.c::men_chameleon_unregister_driver"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_chameleon_unregister_driver </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structCHAMELEON__DRIVER__T.html">CHAMELEON_DRIVER_T</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>drv</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
unregister a chameleon driver 
<p>
Deletes the driver structure from the list of registered chameleon drivers, gives it a chance to clean up by calling its remove() function for each device it was responsible for, and marks those devices as driverless.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>drv</em>&nbsp;</td><td><b>IN</b> the driver structure to register. Must be kept intact by caller. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a name="a19" doxytag="men_chameleon.c::men_chameleonV2_register_driver"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int men_chameleonV2_register_driver </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structCHAMELEONV2__DRIVER__T.html">CHAMELEONV2_DRIVER_T</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>drv</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
register a new chameleon V2 driver 
<p>
Adds the driver structure to the list of registered drivers. Immediately checks if any known FPGA unit can be handled by the new driver and calls it probe() function if so.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>drv</em>&nbsp;</td><td><b>IN</b> the driver structure to register. Must be kept intact by caller.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the number of chameleon units which were claimed by the driver during registration. The driver remains registered even if the return value is zero. </dd></dl>
    </td>
  </tr>
</table>
<a name="a23" doxytag="men_chameleon.c::men_chameleonV2_unit_find"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int men_chameleonV2_unit_find </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>devId</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>idx</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structCHAMELEONV2__UNIT__T.html">CHAMELEONV2_UNIT_T</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>unit</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Find the system wide nth occurrance of a chameleon module <em>devId</em>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>devId</em>&nbsp;</td><td><b>IN</b> device id to search </td></tr>
    <tr><td valign=top><em>idx</em>&nbsp;</td><td><b>IN</b> nth occurance of module (system wide!) </td></tr>
    <tr><td valign=top><em>unit</em>&nbsp;</td><td><b>OUT</b> filled with unit information </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success or negative linux error number </dd></dl>
    </td>
  </tr>
</table>
<a name="a21" doxytag="men_chameleon.c::men_chameleonV2_unregister_driver"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void men_chameleonV2_unregister_driver </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structCHAMELEONV2__DRIVER__T.html">CHAMELEONV2_DRIVER_T</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>drv</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
unregister a chameleon V2 driver 
<p>
Deletes the driver structure from the list of registered chameleon drivers, gives it a chance to clean up by calling its remove() function for each device it was responsible for, and marks those devices as driverless.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>drv</em>&nbsp;</td><td><b>IN</b> the driver structure to register. Must be kept intact by caller. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>

	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for Chameleon System Unit Driver using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2010 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

