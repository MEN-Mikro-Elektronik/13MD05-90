<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - Chameleon Library - Chameleon-V2 Functions</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">Chameleon Library &nbsp; 2.80</h1>
	<h3>Chameleon-V2 Functions</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1><a name="_cham2func">Chameleon-V2 Functions</a>
</h1>The <a class="el" href="group____CHAMV2__FUNC.html">Chameleon-V2 Functions</a> are not directly exported by the chameleon library. The functions must be called via function pointers of the <a class="el" href="structCHAM__FUNCTBL.html">CHAM_FUNCTBL</a> structure. The function pointers are initialized with <a class="el" href="group____CHAMV2__FUNC.html#a0">V2::CHAM_Init()</a>, exported as:<ul>
<li>CHAM_InitMem : for memory access support</li><li>CHAM_InitIo : for io access support</li><li>CHAM_InitMemSw : for swapped memory access support</li><li>CHAM_InitIoSw : for swapped io access support<br>
 This provides the possibility for the caller to switch easily from the memory access variant to the io access variant or swapped variants of the chameleon library.</li></ul>
<p>
<b>Overview of Chameleon-V2 Functions</b><br>
 <a class="el" href="group____CHAMV2__FUNC.html#a1">V2::InitPci()</a>, <a class="el" href="group____CHAMV2__FUNC.html#a2">V2::InitInside()</a> creates an handle for a chameleon device. This handle must be passed to all further V2 functions. <a class="el" href="group____CHAMV2__FUNC.html#a12">V2::Term()</a> destroys the created handle.<br>
 Note: The handle of the V2 functions is different from the handle of the V0 functions.<p>
<a class="el" href="group____CHAMV2__FUNC.html#a3">V2::Info()</a> supplies the global information (from the chameleon table header) of a chameleon device.<br>
<p>
<a class="el" href="group____CHAMV2__FUNC.html#a4">V2::TableIdent()</a> supplies the information about all chameleon tables of the chameleon device.<br>
<p>
<a class="el" href="group____CHAMV2__FUNC.html#a5">V2::UnitIdent()</a>, <a class="el" href="group____CHAMV2__FUNC.html#a8">V2::BridgeIdent()</a>, <a class="el" href="group____CHAMV2__FUNC.html#a7">V2::CpuIdent</a> supplies information about chameleon units/bridges/cpus of the chameleon device.<br>
<p>
<a class="el" href="group____CHAMV2__FUNC.html#a10">V2::InstanceFind</a> searches for a chameleon instance (unit/bridge/cpu) with the specified characteristic(s).<br>
<p>
<b>Chameleon-V2 Bus Architecture</b><br>
 Chameleon-V2 devices may consists of several busses (e.g. Wishbone, Avalon) which are connected by bridges. All chameleon instances (unit/bridge/cpu) of a chameleon bus are described by a seperate, bus specific, Chameleon-V2 table.<br>
 A chameleon bus behind a bridge may be always available (fix connected) or may be pluggable. For that reason, the bus enumeration was moved from a fix enumeration defined within the Chameleon-V2 tables to a dynamic enumeration implemented within the chameleon V2 functions.<br>
 Note: Initially, the Chameleon-V2 table header had implemented a 'bus number' entry but that entry was removed befor the first real usage of the Chameleon-V2 functions with a chameleon device with more than one bus.<br>
<p>
For a detailed description of the Chameleon-V2 architecture, please refer to the <a href="N:\Entwicklung\Chip Design\DSFI">MEN DSFI Specification</a>.<h2><a name="_CHAM2_BUSID"></a>
Chameleon-V2 Bus Enumeration:</h2>
The busId member of the Chameleon-V2 structures (<a class="el" href="structCHAMELEONV2__INFO.html">CHAMELEONV2_INFO</a>, <a class="el" href="structCHAMELEONV2__TABLE.html">CHAMELEONV2_TABLE</a>, <a class="el" href="structCHAMELEONV2__UNIT.html">CHAMELEONV2_UNIT</a>, <a class="el" href="structCHAMELEONV2__BRIDGE.html">CHAMELEONV2_BRIDGE</a>, <a class="el" href="structCHAMELEONV2__CPU.html">CHAMELEONV2_CPU</a>, <a class="el" href="structCHAMELEONV2__FIND.html">CHAMELEONV2_FIND</a>) return the bus number assigned from the chameleon library.<br>
 The following bus number layout/computation is implemented:<br>
<p>
<b>busId=0xJKLM</b><br>
 where <b>J/K/L/M</b> counts the number of bridges (from 0x1..0xe) at the first/second/third/fourth bus layer.<br>
 Therefore, each table can specify up to fourteen bridges (0x1..0xe) and up to five bus layers (a depth of four bridges) are possible within a chameleon device. The root bus (where the caller of V2 functions always resides) has always the busId=0x0000.<br>
<p>
<b>Example bus tree:</b><br>
<p>
<div class="fragment"><pre> [CALLER]
   |
&lt;root bus 0x0000&gt;
   |
   |
   +---BRG---&lt;0x1000&gt;---BRG---&lt;0x1100&gt;
   |
   |
   +---BRG---&lt;0x2000&gt;--+--BRG---&lt;0x2100&gt;
   |                   |
   |                   |
   |                   +--BRG---&lt;0x2200&gt;---BRG---&lt;0x2210&gt;---BRG---&lt;0x2211&gt;
   |
   +---BRG---&lt;0x3000&gt;-
</pre></div><h2><a name="_CHAM2_ADDR"></a>
Chameleon-V2 Addressing</h2>
The <b>bar</b>, <b>offset</b> and <b>*addr</b> members of the Chameleon-V2 structures (<a class="el" href="structCHAMELEONV2__UNIT.html">CHAMELEONV2_UNIT</a>, <a class="el" href="structCHAMELEONV2__BRIDGE.html">CHAMELEONV2_BRIDGE</a>) represents the caller's view. That means:<br>
<ul>
<li>bar : indicates the BAR where the unit/bridge is accessible from the caller</li><li>offset : indicates the offset within the BAR where the unit/bridge is accessible from the caller</li><li>*addr : indicates the computed physical address where the unit can be accessed from the caller<br>
 Note: The physical address may be mapped from the caller into a virtual address space to access an unit. The <a class="el" href="structCHAMELEONV2__BRIDGE.html#o12">CHAMELEONV2_BRIDGE::addr</a> parameter should be used only for informational purposes, because bridges should normally not directly accessed. </li></ul>

	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for Chameleon Library using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2012 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

