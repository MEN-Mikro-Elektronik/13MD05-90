<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - OSS module for Linux/RTAI - oss_irq_rtai.c File Reference</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">OSS module for Linux/RTAI &nbsp; 2.15</h1>
	<h3>oss_irq_rtai.c File Reference</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>oss_irq_rtai.c File Reference</h1>Interrupt related routines.  
<a href="#_details">More...</a>
<p>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>OSS_IRQ_STATE&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="oss__irq__rtai_8c.html#a2">OSS_RtaiIrqMaskR</a> (OSS_HANDLE *oss, OSS_IRQ_HANDLE *irqHandle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mask device interrupts. </em> <a href="#a2"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="oss__irq__rtai_8c.html#a3">OSS_RtaiIrqRestore</a> (OSS_HANDLE *oss, OSS_IRQ_HANDLE *irqHandle, OSS_IRQ_STATE oldState)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unmask device interrupts. </em> <a href="#a3"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="oss__irq__rtai_8c.html#a4">OSS_RtaiIrqMask</a> (OSS_HANDLE *oss, OSS_IRQ_HANDLE *irqHandle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mask device interrupts (old implementation). </em> <a href="#a4"></a><em><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="oss__irq__rtai_8c.html#a5">OSS_RtaiIrqUnMask</a> (OSS_HANDLE *oss, OSS_IRQ_HANDLE *irqHandle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unmask device interrupts (old implementation). </em> <a href="#a5"></a><em><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Interrupt related routines. 
<p>
<dl compact><dt><b>Author:</b></dt><dd><a href="mailto:klaus.popp@men.de">klaus.popp@men.de</a> <dl compact><dt><b>Date</b></dt><dd>2006/09/26 10:17:31 </dd></dl>
<dl compact><dt><b>Revision</b></dt><dd>2.4 </dd></dl>
</dd></dl>
<dl compact><dt><b>Project:</b></dt><dd>MDIS4Linux/RTAI </dd></dl>
<dl compact><dt><b>Preprocessor Switches:</b></dt><dd>MDIS_RTAI_SUPPORT - must be set to enable this code</dd></dl>
<hr><h2>Function Documentation</h2>
<a name="a4" doxytag="oss_irq_rtai.c::OSS_RtaiIrqMask"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void OSS_RtaiIrqMask </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OSS_HANDLE *&nbsp;</td>
          <td class="mdname" nowrap> <em>oss</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>OSS_IRQ_HANDLE *&nbsp;</td>
          <td class="mdname" nowrap> <em>irqHandle</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Mask device interrupts (old implementation). 
<p>
This routine masks the processor interrupts. Depending on the OS and platform, it masks either all interrupts or only the interrupt level at which the device would interrupt. For example, under OS-9/68k, when the device interrupts at IRQ level 4, <a class="el" href="oss__irq_8c.html#a17">OSS_IrqMask()</a> would mask IRQ levels 1..4, but level 5..7 interrupts could still occur.<p>
Other implementations mask all processor interrupts.<p>
To indicate which interrupt level to mask, this routine uses the <em>irqHandle</em> structure, which is filled typically by an <em>OSS_IrqInit()</em> routine. This routine does not exist on all implementations. If it does not exist, you can pass <code>NULL</code> to <em>irqHandle</em>.<p>
To re-enable processor interrupts, call <a class="el" href="oss__irq_8c.html#a18">OSS_IrqUnMask()</a>.<p>
This routine should keep track of the nesting level. If <a class="el" href="oss__irq_8c.html#a17">OSS_IrqMask()</a> has been called already without calling <a class="el" href="oss__irq_8c.html#a18">OSS_IrqUnMask()</a> in between, it shall ignore the second call.<p>
For multiprocessor environments spin lock will be released by <a class="el" href="oss__irq_8c.html#a17">OSS_IrqMask()</a>.<p>
With locked interrupts/ spinlocks no system/OSS calls are allowed with the exception of: <a class="el" href="oss__time_8c.html#a13">OSS_MikroDelay()</a> <a class="el" href="oss__clib_8c.html#a0">OSS_MemCopy()</a> <a class="el" href="oss__clib_8c.html#a1">OSS_MemFill()</a><p>
In general critical sections protected by <a class="el" href="oss__irq_8c.html#a17">OSS_IrqMask()</a> must be as short as possible.<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>Due to the nesting problems, this routine shall no longer be used. Use <a class="el" href="oss__irq_8c.html#a15">OSS_IrqMaskR()</a> / <a class="el" href="oss__irq_8c.html#a16">OSS_IrqRestore()</a> instead. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>oss</em>&nbsp;</td><td><b>IN</b> OSS handle, returned by <a class="el" href="oss_8c.html#a66">OSS_Init()</a> </td></tr>
    <tr><td valign=top><em>irqHandle</em>&nbsp;</td><td><b>IN</b> IRQ handle, returned by OSS_IrqInit() or <code>NULL</code> if no OSS_IrqInit() exists.</td></tr>
  </table>
</dl>
<p>
<dl compact><dt><b>RTAI notes:</b></dt><dd>Masks <b>all</b> processor interrupts The behaviour of this function depends on the <em>rtMode</em> flag passed to the <a class="el" href="oss_8c.html#a66">OSS_Init()</a> function. Either the standard Linux kernel or RTAI implementation is called. For Linux implementation, see <a class="el" href="oss__irq_8c.html#a17">OSS_IrqMask()</a>. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="oss__irq__rtai_8c.html#a5">OSS_RtaiIrqUnMask()</a> </dd></dl>
    </td>
  </tr>
</table>
<a name="a2" doxytag="oss_irq_rtai.c::OSS_RtaiIrqMaskR"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> OSS_IRQ_STATE OSS_RtaiIrqMaskR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OSS_HANDLE *&nbsp;</td>
          <td class="mdname" nowrap> <em>oss</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>OSS_IRQ_HANDLE *&nbsp;</td>
          <td class="mdname" nowrap> <em>irqHandle</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Mask device interrupts. 
<p>
This is the revised version of <a class="el" href="oss__irq_8c.html#a17">OSS_IrqMask()</a>.<p>
This routine masks the processor interrupts. Depending on the OS and platform, it masks either all interrupts or only the interrupt level at which the device would interrupt. For example, under OS-9/68k, when the device interrupts at IRQ level 4, <a class="el" href="oss__irq_8c.html#a17">OSS_IrqMask()</a> would mask IRQ levels 1..4, but level 5..7 interrupts could still occur.<p>
Other implementations mask all processor interrupts.<p>
To indicate which interrupt level to mask, this routine uses the <em>irqHandle</em> structure, which is filled typically by an <em>OSS_IrqInit()</em> routine. This routine does not exist on all implementations. If it does not exist, you can pass <code>NULL</code> to <em>irqHandle</em>.<p>
To re-enable processor interrupts, call <a class="el" href="oss__irq_8c.html#a16">OSS_IrqRestore()</a>.<p>
The return value of <a class="el" href="oss__irq_8c.html#a15">OSS_IrqMaskR()</a> is the system's IRQ state before <a class="el" href="oss__irq_8c.html#a15">OSS_IrqMaskR()</a> has been called. <code>OSS_IRQ_STATE</code> is a system specific type that reflects the interrupt state of the system. The returned value has to be passed to <a class="el" href="oss__irq_8c.html#a16">OSS_IrqRestore()</a>.<p>
Implementations must make sure that <a class="el" href="oss__irq_8c.html#a15">OSS_IrqMaskR()</a> can be called from any context, include from within interrupt and alarm contexts. Nesting calls to <a class="el" href="oss__irq_8c.html#a15">OSS_IrqMaskR()</a>/OSS_IrqRestore() must be also supported<p>
For multiprocessor environments spin lock will be taken by <a class="el" href="oss__irq_8c.html#a15">OSS_IrqMaskR()</a>.<p>
With locked interrupts/ spinlocks no system/OSS calls are allowed with the exception of: <a class="el" href="oss__time_8c.html#a13">OSS_MikroDelay()</a> <a class="el" href="oss__clib_8c.html#a0">OSS_MemCopy()</a> <a class="el" href="oss__clib_8c.html#a1">OSS_MemFill()</a><p>
In general critical sections protected by <a class="el" href="oss__irq_8c.html#a15">OSS_IrqMaskR()</a> must be as short as possible.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>oss</em>&nbsp;</td><td><b>IN</b> OSS handle, returned by <a class="el" href="oss_8c.html#a66">OSS_Init()</a> </td></tr>
    <tr><td valign=top><em>irqHandle</em>&nbsp;</td><td><b>IN</b> IRQ handle, returned by OSS_IrqInit() or <code>NULL</code> if no OSS_IrqInit() exists. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>reflects IRQ state before interrupt is masked.</dd></dl>
<p>
<dl compact><dt><b>RTAI notes:</b></dt><dd>Masks <b>all</b> processor interrupts The behaviour of this function depends on the <em>rtMode</em> flag passed to the <a class="el" href="oss_8c.html#a66">OSS_Init()</a> function. Either the standard Linux kernel or RTAI implementation is called. For Linux implementation, see <a class="el" href="oss__irq_8c.html#a15">OSS_IrqMaskR()</a>. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="oss__irq__rtai_8c.html#a3">OSS_RtaiIrqRestore()</a> </dd></dl>
    </td>
  </tr>
</table>
<a name="a3" doxytag="oss_irq_rtai.c::OSS_RtaiIrqRestore"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void OSS_RtaiIrqRestore </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OSS_HANDLE *&nbsp;</td>
          <td class="mdname" nowrap> <em>oss</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>OSS_IRQ_HANDLE *&nbsp;</td>
          <td class="mdname" nowrap> <em>irqHandle</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>OSS_IRQ_STATE&nbsp;</td>
          <td class="mdname" nowrap> <em>oldState</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Unmask device interrupts. 
<p>
Revised version of <a class="el" href="oss__irq_8c.html#a18">OSS_IrqUnMask()</a>.<p>
Must be called to restore the interrupt flag/level to the state before <a class="el" href="oss__irq_8c.html#a15">OSS_IrqMaskR()</a> has been called.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>oss</em>&nbsp;</td><td><b>IN</b> OSS handle, returned by <a class="el" href="oss_8c.html#a66">OSS_Init()</a> </td></tr>
    <tr><td valign=top><em>irqHandle</em>&nbsp;</td><td><b>IN</b> IRQ handle, returned by OSS_IrqInit() or <code>NULL</code> if no OSS_IrqInit() exists. </td></tr>
    <tr><td valign=top><em>oldState</em>&nbsp;</td><td><b>IN</b> value returned by <a class="el" href="oss__irq_8c.html#a15">OSS_IrqMaskR()</a>.</td></tr>
  </table>
</dl>
 <dl compact><dt><b>RTAI notes:</b></dt><dd>The behaviour of this function depends on the <em>rtMode</em> flag passed to the <a class="el" href="oss_8c.html#a66">OSS_Init()</a> function. Either the standard Linux kernel or RTAI implementation is called. For RTAI implementation, see <a class="el" href="oss__irq_8c.html#a16">OSS_IrqRestore()</a>.</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="oss__irq__rtai_8c.html#a2">OSS_RtaiIrqMaskR()</a> </dd></dl>
    </td>
  </tr>
</table>
<a name="a5" doxytag="oss_irq_rtai.c::OSS_RtaiIrqUnMask"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void OSS_RtaiIrqUnMask </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OSS_HANDLE *&nbsp;</td>
          <td class="mdname" nowrap> <em>oss</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>OSS_IRQ_HANDLE *&nbsp;</td>
          <td class="mdname" nowrap> <em>irqHandle</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Unmask device interrupts (old implementation). 
<p>
Must be called to restore the interrupt flag/level to the state before <a class="el" href="oss__irq_8c.html#a17">OSS_IrqMask()</a> has been called.<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000002">Deprecated:</a></b></dt><dd>Due to the nesting problems, this routine shall no longer be used. Use <a class="el" href="oss__irq_8c.html#a15">OSS_IrqMaskR()</a> / <a class="el" href="oss__irq_8c.html#a16">OSS_IrqRestore()</a> instead. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>oss</em>&nbsp;</td><td><b>IN</b> OSS handle, returned by <a class="el" href="oss_8c.html#a66">OSS_Init()</a> </td></tr>
    <tr><td valign=top><em>irqHandle</em>&nbsp;</td><td><b>IN</b> IRQ handle, returned by OSS_IrqInit() or <code>NULL</code> if no OSS_IrqInit() exists.</td></tr>
  </table>
</dl>
 <dl compact><dt><b>RTAI notes:</b></dt><dd>The behaviour of this function depends on the <em>rtMode</em> flag passed to the <a class="el" href="oss_8c.html#a66">OSS_Init()</a> function. Either the standard Linux kernel or RTAI implementation is called. For Linux implementation, see <a class="el" href="oss__irq_8c.html#a18">OSS_IrqUnMask()</a>. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="oss__irq__rtai_8c.html#a4">OSS_RtaiIrqMask()</a> </dd></dl>
    </td>
  </tr>
</table>

	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for OSS module for Linux/RTAI using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2012 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

