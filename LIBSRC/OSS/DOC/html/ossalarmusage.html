<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - OSS module for Linux/RTAI - Gernal Usage of OSS Alarms</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">OSS module for Linux/RTAI &nbsp; 2.15</h1>
	<h3>Gernal Usage of OSS Alarms</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1><a name="ossalarmusage">Gernal Usage of OSS Alarms</a>
</h1>Alarm routines are kernel functions which are triggered cyclically or once with a defined period. Alarm routines are typically executed in interrupt context or from an high priority task.<p>
An alarm routine is installed from the driver where an argument for the routine can be defined.<p>
The alarm routine is passed the installed application argument.<p>
Alarm routines are identified via a alarm handle, which is created by the OSS_AlaramCreate() function. All subsequent calls refer to this handle.<p>
The number of installable alarm routines is not limited.<p>
Typical usage:<p>
<div class="fragment"><pre>      <span class="comment">// Driver INIT:</span>
         <a class="code" href="oss__alarm_8c.html#a20">OSS_AlarmCreate</a>();
      <span class="comment">// Driver EXIT:</span>
         <a class="code" href="oss__alarm_8c.html#a21">OSS_AlarmRemove</a>();
      <span class="comment">//Driver GETSTAT/SETSTAT/WRITE/READ:</span>
         <a class="code" href="oss__alarm_8c.html#a22">OSS_AlarmSet</a>();
         ...
         <a class="code" href="oss__alarm_8c.html#a23">OSS_AlarmClear</a>();

      <span class="comment">// Handler:     </span>
      AlarmHandler()
      {
      }
</pre></div><p>
From the drivers main routines, alarms can be temporarily disabled by calling <a class="el" href="oss__alarm_8c.html#a24">OSS_AlarmMask()</a>, to prevent concurrent access to shared data used both by the main routines and alarm handler. After finishing the critical code, call <a class="el" href="oss__alarm_8c.html#a25">OSS_AlarmRestore()</a>.<p>
The time for which alarms are masked shall be kept as short as possible (since in most implementations all interrupts are masked). Furthermore, while alarms are masked, only call (OSS) functions that are allowed to be called from interrupt routines.<p>
If an alarm would be triggered while alarms are masked, execution of the alarm handler is delayed until <a class="el" href="oss__alarm_8c.html#a25">OSS_AlarmRestore()</a> is called.<p>
In some implementations, device interrupts may still occurr while alarms are masked. 
	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for OSS module for Linux/RTAI using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2012 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

