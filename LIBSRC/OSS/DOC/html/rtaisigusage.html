<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - OSS module for Linux/RTAI - $title</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">OSS module for Linux/RTAI &nbsp; 2.15</h1>
	<h3>$title</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h2><a name="rtaisigusagesect"></a>
RTAI notes to OSS signals</h2>
Since RTAI has no native signals, the RTAI OSS library emulates signals together with the <em>USR_OSS</em> library.<p>
For every task that wishes to receive signals a second task is started. This signal task will have a priority one higher than the original task (Unless the org. tasks priority is &lt;= 1). For example, if the original task has prio 10, the signal handler task will have prio 9. The only purpose of the signal task is to execute the user's signal handler which is called asynchronously to the program flow of the original task.<p>
An RTAI <em>mailbox</em> provides the communication between the driver(s) and the signal task. This mailbox has a fixed number of signal entries that it can buffer, defined at compile time, typically 64. You can change this by modifying <a class="el" href="oss__sig__rtai_8c.html#a1">SIG_TASK_TBL_ENTRIES</a>.<h3><a name="rtainativesig"></a>
Native signal handling</h3>
An alternative method to handle signals under RTAI is provided. When an application uses this method, it is no longer portable across OSes supported by MDIS.<p>
Instead of starting a separate task, the application can directly read from the signal mailbox. This method provides a synchronous communication between driver(s) and application.<p>
To use native signal handling, application must call UOS_RtaiSigInit() which returns a handle for the created mailbox:<p>
<div class="fragment"><pre>    MBOX mbx;
    u_int32 sigCode;

    error = UOS_RtaiSigInit( &amp;mbx );
    <span class="comment">// wait for signals</span>
    rt_mbx_receive( &amp;mbx, &amp;sigCode, <span class="keyword">sizeof</span>(sigCode));
</pre></div><p>
Under Xenomai (=RTAI/fusion) Mailboxes dont exist, instead Message queues are used. The usage is the same, with the difference that for using Xenomai the address of an RT_QUEUE struct is passed to UOS_RtaiSigInit() and the other Functions who expect a MBX struct address in classic RTAI usage.<p>
<div class="fragment"><pre>  <span class="comment">//Xenomai example</span>
  RT_QUEUE q;
  u_int32 sigCode;  

  error = UOS_RtaiSigInit( &amp;q );
  <span class="comment">// wait for signals</span>
  rt_queue_recv( &amp;q, &amp;sigCode, <span class="keyword">sizeof</span>(sigCode));
</pre></div><p>
See <a class="el" href=""></a> for more info. 
	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for OSS module for Linux/RTAI using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2012 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

