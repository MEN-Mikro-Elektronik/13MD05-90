<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - OSS module for Linux/RTAI - oss_smb.c File Reference</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">OSS module for Linux/RTAI &nbsp; 2.15</h1>
	<h3>oss_smb.c File Reference</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>oss_smb.c File Reference</h1>SMB Handle and access functions for the OSS library. wraps the SMB handle accesses to Linux SMB function calls. The Linux function calls are those in linux/i2c.h.  
<a href="#_details">More...</a>
<p>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><b>i2ctest_data</b></td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int32&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="oss__smb_8c.html#a28">OSS_GetSmbHdl</a> (OSS_HANDLE *oss, u_int32 busNbr, void **smbHdlP)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">do a quick write to the SMBus with just the r/w bit The function Creates and returns the OSS SMB Handle for use in SMB2 LL Driver. The busNr correlates to /dev/i2c- in Linux. </em> <a href="#a28"></a><em><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
SMB Handle and access functions for the OSS library. wraps the SMB handle accesses to Linux SMB function calls. The Linux function calls are those in linux/i2c.h. 
<p>
<dl compact><dt><b>Author:</b></dt><dd><a href="mailto:thomas.schnuerer@men.de">thomas.schnuerer@men.de</a> <dl compact><dt><b>Date</b></dt><dd>2006/06/21 17:53:32 </dd></dl>
<dl compact><dt><b>Revision</b></dt><dd>2.1 </dd></dl>
</dd></dl>
<dl compact><dt><b>Project:</b></dt><dd>MDIS4Linux </dd></dl>
<p>
<dl compact><dt><b>Preprocessor Switches:</b></dt><dd><ul>
<li></li></ul>
</dd></dl>
<hr><h2>Function Documentation</h2>
<a name="a28" doxytag="oss_smb.c::OSS_GetSmbHdl"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int32 OSS_GetSmbHdl </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">OSS_HANDLE *&nbsp;</td>
          <td class="mdname" nowrap> <em>oss</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>u_int32&nbsp;</td>
          <td class="mdname" nowrap> <em>busNbr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>void **&nbsp;</td>
          <td class="mdname" nowrap> <em>smbHdlP</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
do a quick write to the SMBus with just the r/w bit The function Creates and returns the OSS SMB Handle for use in SMB2 LL Driver. The busNr correlates to /dev/i2c- in Linux. 
<p>
The function requests the smbHdl for the specified SMBus.<p>
The smbHdl is a pointer to a SMB_HANDLE structure (as defined in sysmanagbus2.h) that provides the functions to access the specified SMBus. The smbHdl can be the initialized handle returned from the Smb_&lt;HWName&gt;_Init() function of the common SMB2 library or it can be initialized from a native SW module. The OS specific implementation of the SMBus support is responsible to initialize the smbHdl prior to <a class="el" href="oss__smb_8c.html#a28">OSS_GetSmbHdl()</a> calls.<p>
With the gotten smbHdl, the caller can use the provided SMB functions. Example: SMB_HANDLE *smbH = ((SMB_HANDLE*)*smbHdlP); error = smbH-&gt;WriteByte( smbH, addr, data );<p>
The function returns <code>ERR_OSS_ILL_HANDLE</code> if the requested smbHdl is not available.<p>
<dl compact><dt><b>Remarks:</b></dt><dd>The returned smbHdl is no longer valid after the SMB libraries exit function was called. The caller of OSS_GetSmbHdl must not call the SMB libraries exit function. The SMB library is responsible for the synchronisation of the provided SMB library functions. The suggested assignment for the SMBus identifikation is: busNbr=0 : onboard SMBus, busNbr=1 : additional onboard SMBus or plugged SMBus.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>oss</em>&nbsp;</td><td><b>IN</b> OSS handle, returned by <a class="el" href="oss_8c.html#a66">OSS_Init()</a> </td></tr>
    <tr><td valign=top><em>busNbr</em>&nbsp;</td><td><b>IN</b> SMBus identifikation (0,1,2,...) </td></tr>
    <tr><td valign=top><em>smbHdlP</em>&nbsp;</td><td><b>OUT</b> smbHdl</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success or <code>ERR_OSS_xxx</code> error code on error </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="oss__specification_8c.html#a66">OSS_SetSmbHdl</a> </dd></dl>
    </td>
  </tr>
</table>

	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for OSS module for Linux/RTAI using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2012 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

